/*
Copyright (c) 2020 Daybrush
name: moveable-helper
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable-helper.git
version: 0.2.0
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).MoveableHelper=e()}(this,function(){"use strict";function t(t){if(!h)return"";var e=(h.body||h.documentElement).style,r=l.length;if(typeof e[t]!=i)return t;for(var n=0;n<r;++n){var a="-"+l[n]+"-"+t;if(typeof e[a]!=i)return a}return""}var r=function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},p="rgb",v="rgba",g="hsl",m="hsla",c=[p,v,g,m],o="function",s="property",u="array",f="object",n="string",a="number",i="undefined",h=typeof document!=i&&document,l=["webkit","ms","moz","o"],d=t("transform"),x=t("filter"),S=t("animation"),y=['"',"'",'\\"',"\\'"];function F(t){return t&&typeof t===f}function b(t){return Array.isArray(t)}function R(t){return typeof t===n}function O(t,e,r,n){for(var a=r;a<n;++a){var i=e[a].trim();if(i===t)return a;var o=a;if("("===i?o=O(")",e,a+1,n):-1<y.indexOf(i)&&(o=O(i,e,a+1,n)),-1===o)break;a=o}return-1}function w(t,e){for(var r=t.split(/(\s*,\s*|\(|\)|"|'|\\"|\\'|\s+)/g).filter(Boolean),n=r.length,a=[],i=[],o=0;o<n;++o){var s=r[o].trim(),u=o;if("("===s)u=O(")",r,o+1,n);else{if(")"===s)throw new Error("invalid format");if(-1<y.indexOf(s))u=O(s,r,o+1,n);else if(s===e){i.length&&(a.push(i.join("")),i=[]);continue}}-1===u&&(u=n-1),i.push(r.slice(o,u+1).join("")),o=u}return i.length&&a.push(i.join("")),a}function D(t){return w(t,",")}function j(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function E(t){var e=t.replace("#",""),r=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return isNaN(i)&&(i=1),[r,n,a,i]}function M(t){if("#"===t.charAt(0))return 4===t.length||5===t.length?E((f=(u=t).charAt(1),c=u.charAt(2),h=u.charAt(3),l=u.charAt(4),["#",f,f,c,c,h,h,l,l].join(""))):E(t);if(-1!==t.indexOf("(")){var e=j(t),r=e.prefix,n=e.value;if(!r||!n)return;var a=D(n),i=[],o=a.length;switch(r){case p:case v:for(var s=0;s<o;++s)i[s]=parseFloat(a[s]);return i;case g:case m:for(s=0;s<o;++s)-1!==a[s].indexOf("%")?i[s]=parseFloat(a[s])/100:i[s]=parseFloat(a[s]);return function(t){var e=t[0],r=t[1],n=t[2];e<0&&(e+=360*Math.floor((Math.abs(e)+360)/360)),e%=360;var a,i=(1-Math.abs(2*n-1))*r,o=i*(1-Math.abs(e/60%2-1)),s=n-i/2;return e<60?a=[i,o,0]:e<120?a=[o,i,0]:e<180?a=[0,i,o]:e<240?a=[0,o,i]:e<300?a=[o,0,i]:e<360&&(a=[i,0,o]),[Math.round(255*(a[0]+s)),Math.round(255*(a[1]+s)),Math.round(255*(a[2]+s)),3<t.length?t[3]:1]}(i)}}var u,f,c,h,l}function z(t,e,r){var n=1-r;return r*r*r+3*r*r*n*e+3*r*n*n*t}function A(r,n,a,i){function t(t){var e=function(t,e,r){for(var n=r,a=1;.001<Math.abs(a);){if(a=z(t,e,n)-r,Math.abs(a)<.001)return n;n-=a/2}return n}(r,a,Math.max(Math.min(1,t),0));return z(n,i,e)}return t.easingName="cubic-bezier("+r+","+n+","+a+","+i+")",t}function _(r,n){function t(t){var e=1/r;return 1<=t?1:("start"===n?e:0)+Math.floor(t/e)*e}return t.easingName="steps("+r+", "+n+")",t}var e,G=_(1,"start"),T=_(1,"end"),N=A(0,0,1,1),C=A(.25,.1,.25,1),I=A(.42,0,1,1),V=A(0,0,.58,1),k=A(.42,0,.58,1),W="animation-timing-function",H={transform:{},filter:{},attribute:{},html:!0},X={easing:[W]},Y=((e={})[W]=!0,e.contents=!0,e.html=!0,e),$={linear:N,ease:C,"ease-in":I,"ease-out":V,"ease-in-out":k,"step-start":G,"step-end":T},q=function(){function o(t,e){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",e&&this.setOptions(e),this.value=R(t)?t.split(this.separator):t}var t=o.prototype;return t.setOptions=function(t){for(var e in t)this[e]=t[e];return this},t.size=function(){return this.value.length},t.get=function(t){return this.value[t]},t.set=function(t,e){return this.value[t]=e,this},t.clone=function(){var t=this,e=t.separator,r=t.prefix,n=t.suffix,a=t.model,i=t.type;return new o(this.value.map(function(t){return t instanceof o?t.clone():t}),{separator:e,prefix:r,suffix:n,model:a,type:i})},t.toValue=function(){return this.prefix+this.join()+this.suffix},t.join=function(){return this.value.map(function(t){return t instanceof o?t.toValue():t}).join(this.separator)},t.forEach=function(t){return this.value.forEach(t),this},o}();function B(t){var e=v;return 3===t.length&&(t[3]=1),new q(t,{model:e,separator:",",type:"color",prefix:e+"(",suffix:")"})}function P(t,e){return new q(t,{type:"array",separator:e})}function J(t,e){if(!R(t))return b(t)?P(t,","):t;var r,n,a=D(t);return 1<a.length?P(a.map(function(t){return J(t)}),","):1<(a=w(t,"")).length?P(a.map(function(t){return J(t)})," "):(a=/^(['"])([^'"]*)(['"])$/g.exec(t))&&a[1]===a[3]?new q([J(a[2])],{prefix:a[1],suffix:a[1]}):-1!==t.indexOf("(")?function(t){var e=j(t),r=e.prefix,n=e.value,a=e.suffix;if(void 0===n)return t;if(-1<c.indexOf(r))return B(M(t));var i=J(n,r),o=[n],s=",",u=r+"(",f=")"+a;return i instanceof q&&(s=i.separator,o=i.value,u+=i.prefix,f=i.suffix+f),new q(o,{separator:s,model:r,prefix:u,suffix:f})}(t):"#"===t.charAt(0)&&"url"!==e?(n=M(r=t))?B(n):r:t}function K(t){return t instanceof q}function L(t){var e=typeof t;if(e===f){if(b(t))return u;if(K(t))return s}else if(e===n||e===a)return"value";return e}function Q(t,e){var r,n=[];if(F(r=t)&&r.constructor===Object)for(var a in t)e.push(a),n=n.concat(Q(t[a],e)),e.pop();else n.push(e.slice());return n}function U(t,e,r){void 0===r&&(r=t.length);for(var n=e,a=0;a<r;++a){if(!F(n))return;n=n[t[a]]}return n}function Z(t,e,r){var n=e.length,a=t;if(0===n)return!1;for(var i=0;i<n;++i){if(!0===a)return!1;if(!(a=a[e[i]])||!r&&!0===a)return!1}return!0}function tt(t,e){return Z(H,t,e)}function et(t){return Z(Y,t,!0)}function rt(t){if(!t)return"";var e=[];for(var r in t)e.push(r.replace(/\d$/g,"")+"("+t[r]+")");return e.join(" ")}function nt(t,e){return void 0===e&&(e=!1),at({},t,e)}function at(t,e,r){for(var n in void 0===r&&(r=!1),e){var a=e[n],i=L(a);i===s?t[n]=r?a.toValue():a.clone():i===o?t[n]=r?ot([n],a):a:i===u?t[n]=a.slice():i===f?F(t[n])&&!K(t[n])?at(t[n],a,r):t[n]=nt(a,r):t[n]=e[n]}return t}function it(t){return t[0]in X?X[t[0]]:t}function ot(t,e){var r=L(e);if(r===s)return e.toValue();if(r===o){if(t[0]!==W)return ot(t,e())}else if(r===f)return nt(e,!0);return e}var st=function(){function l(t){void 0===t&&(t={}),this.properties={},this.set(t)}var t=l.prototype;return t.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.raw.apply(this,t);return ot(it(t),r)},t.raw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return U(it(t),this.properties)},t.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=it(t),n=r.length;if(!n)return this;var a=U(r,this.properties,n-1);return F(a)&&delete a[r[n-1]],this},t.set=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r,n=this,a=t.length,i=t.slice(0,-1),o=t[a-1],s=i[0];if(1===a&&o instanceof l)n.merge(o);else if(s in X)n._set(X[s],o);else if(2===a&&b(s))n._set(s,o);else if(K(o))tt(i)?n.set.apply(n,i.concat([function e(t,r){void 0===r&&(r={});var n,a=t.model;return a?(t.setOptions({model:"",suffix:"",prefix:""}),n=1<t.size()?t:t.get(0),r[a]=n):t.forEach(function(t){e(t,r)}),r}(o)])):n._set(i,o);else if(b(o))n._set(i,o);else if(F(o))for(var u in!n.has.apply(n,i)&&tt(i)&&n._set(i,{}),o)n.set.apply(n,i.concat([u,o[u]]));else if(R(o)){if(tt(i,!0))return et(i)||!tt(i)?this._set(i,o):F(r=J(o))&&n.set.apply(n,i.concat([r])),this;var f=function(t){for(var e=t.split(";"),r={},n=e.length,a=0;a<n;++a){var i=/([^:]*):([\S\s]*)/g.exec(e[a]);!i||i.length<3||!i[1]?--n:r[i[1].trim()]=J(i[2].trim())}return{styles:r,length:n}}(o),c=f.styles,h=f.length;for(var u in c)n.set.apply(n,i.concat([u,c[u]]));if(h)return this;n._set(i,o)}else n._set(i,o);return n},t.getNames=function(){return Q(this.properties,[])},t.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=it(t),n=r.length;return!!n&&!(typeof U(r,this.properties,n)==i)},t.clone=function(){return(new l).merge(this)},t.merge=function(t){var e=this.properties,r=t.properties;return r&&at(e,r),this},t.toCSSObject=function(){var t,e=this.get(),r={};for(var n in e){tt([n],!0)||(t=e[n],n===W?r[W.replace("animation",S)]=(R(t)?t:t.easingName)||"initial":r[n]=t)}var a=rt(e.transform),i=rt(e.filter);return d&&a&&(r[d]=a),x&&i&&(r[x]=i),r},t.toCSS=function(){var t=this.toCSSObject(),e=[];for(var r in t)e.push(r+":"+t[r]+";");return e.join("")},t._set=function(t,e){for(var r,n=this.properties,a=t.length,i=0;i<a-1;++i){var o=t[i];o in n||(n[o]={}),n=n[o]}a&&(1===a&&t[0]===W?n[W]=function(t){var e;if(R(t))if(t in $)e=$[t];else{var r=J(t);if(R(r))return 0;if("cubic-bezier"===r.model)e=A((t=r.value.map(function(t){return parseFloat(t)}))[0],t[1],t[2],t[3]);else{if("steps"!==r.model)return 0;e=_(parseFloat(r.value[0]),r.value[1])}}else e=b(t)?A(t[0],t[1],t[2],t[3]):t;return e}(e):n[r=t[a-1]]=R(e)&&!et(t)?J(e,r):e)},l}();return function(){function e(t){var n=this;void 0===t&&(t={}),this.map=new Map,this.onDragStart=function(t){var e=n.testFrame(t);if(!e)return!1;t.set(n.getTranslate(e))},this.onDrag=function(t){n.testDrag(t),n.testRender(t.target)},this.onDragGroupStart=function(t){t.events.forEach(function(t){n.onDragStart(t)})},this.onDragGroup=function(t){t.events.forEach(function(t){n.onDrag(t)})},this.onResizeStart=function(t){t.dragStart&&n.onDragStart(t.dragStart),t.setOrigin(["%","%"])},this.onResize=function(t){n.testResize(t),n.testRender(t.target)},this.onResizeGroupStart=function(t){t.events.forEach(function(t){n.onResizeStart(t)})},this.onResizeGroup=function(t){console.log(t.offsetWidth/t.offsetHeight),t.events.forEach(function(t){n.onResize(t)})},this.onScaleStart=function(t){var e=n.testFrame(t);if(!e)return!1;var r=e.get("transform","scale").split(",").map(function(t){return parseFloat(t)});t.set(r),t.dragStart&&n.onDragStart(t.dragStart)},this.onScale=function(t){n.testScale(t),n.testRender(t.target)},this.onScaleGroupStart=function(t){t.events.forEach(function(t){n.onScaleStart(t)})},this.onScaleGroup=function(t){t.events.forEach(function(t){n.onScale(t)})},this.onRotateStart=function(t){var e=n.testFrame(t);if(!e)return!1;var r=parseFloat(e.get("transform","rotate"))||0;t.set(r),t.dragStart&&n.onDragStart(t.dragStart)},this.onRotate=function(t){n.testRotate(t),n.testRender(t.target)},this.onRotateGroupStart=function(t){t.events.forEach(function(t){n.onRotateStart(t)})},this.onRotateGroup=function(t){t.events.forEach(function(t){n.onRotate(t)})},this.onClip=function(t){var e=n.testFrame(t);"rect"===t.clipType?e.set("clip",t.clipStyle):e.set("clip-path",t.clipStyle),n.testRender(t.target)},this.onDragOriginStart=function(t){t.dragStart&&n.onDragStart(t.dragStart)},this.onDragOrigin=function(t){n.testFrame(t).set("transform-origin",t.transformOrigin),n.testDrag(t.drag),n.testRender(t.target)},this.onRound=function(t){n.testFrame(t).set("border-radius",t.borderRadius),n.testRender(t.target)},this.onWarpStart=function(t){var e=n.testFrame(t);if(!e)return!1;var r=e.get("transform","matrix3d");r&&t.set(r.split(",").map(function(t){return parseFloat(t)}))},this.onWarp=function(t){n.testFrame(t).set("transform","matrix3d",t.matrix.join(", ")),n.testRender(t.target)},this.onRender=function(t){var e=t.target,r=n.getFrame(e);e&&r&&n.render(e,r)},this.options=r({useRender:!1,createAuto:!0},t)}var t=e.prototype;return e.create=function(t){return new e(t)},t.render=function(t,e){void 0===e&&(e=this.getFrame(t)),t.style.cssText+=e.toCSS()},t.clear=function(){this.map.clear()},t.getTargets=function(){return this.map.keys()},t.getFrames=function(){return this.map.values()},t.getFrame=function(t){return this.map.get(t)},t.setFrame=function(t,e){return this.map.set(t,e)},t.removeFrame=function(t){this.map.delete(t)},t.createFrame=function(t,e){void 0===e&&(e={});var r=new st({transform:{translate:"0px, 0px",rotate:"0deg",scale:"1, 1"}});return r.set(e),this.map.set(t,r),r},t.setElements=function(t){for(var e=R(t)?document.querySelectorAll(t):t,r=e.length,n=this.map,a=0;a<r;++a){var i=e[a];n.has(i)||this.createFrame(i)}},t.testFrame=function(t){var e=t.target,r=this.getFrame(e);return r||(this.options.createAuto||!t.stop?this.createFrame(e):void t.stop())},t.getTranslate=function(t){return this.testTranslate(t).map(function(t){return parseFloat(t)||0})},t.testTranslate=function(t){var e=t.get("transform","translate");if(e)return e.split(",");var r=t.get("transform","translateX");return r?[r,t.get("transform","translateY")]:(t.set("transform","translate","0px,0px"),["0px","0px"])},t.testDrag=function(t){var e=t.target,r=t.beforeTranslate,n=this.getFrame(e),a=r[0]+"px",i=r[1]+"px";n.has("transform","translate")?n.set("transform","translate",a+","+i):(n.set("transform","translateX",a),n.set("transform","translateY",i))},t.testResize=function(t){var e=t.target,r=this.getFrame(e);r.set("width",t.width+"px"),r.set("height",t.height+"px"),this.testDrag(t.drag)},t.testScale=function(t){var e=this.testFrame(t),r=t.scale;this.testDrag(t.drag),e.set("transform","scale",r[0]+","+r[1])},t.testRotate=function(t){var e=this.testFrame(t),r=t.beforeRotate;t.drag&&this.testDrag(t.drag),e.set("transform","rotate",r+"deg")},t.testRender=function(t,e){void 0===e&&(e=this.getFrame(t)),this.options.useRender||this.render(t,e)},e}()});
//# sourceMappingURL=moveable-helper.min.js.map
