/*
Copyright (c) 2020 Daybrush
name: moveable-helper
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable-helper.git
version: 0.3.0
*/
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).MoveableHelper=r()}(this,function(){"use strict";function t(t){if(!h)return"";var r=(h.body||h.documentElement).style,e=l.length;if(typeof r[t]!=a)return t;for(var n=0;n<e;++n){var i="-"+l[n]+"-"+t;if(typeof r[i]!=a)return i}return""}var e=function(){return(e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)},p="rgb",v="rgba",d="hsl",g="hsla",c=[p,v,d,g],o="function",s="property",u="array",f="object",n="string",i="number",a="undefined",h=typeof document!=a&&document,l=["webkit","ms","moz","o"],m=t("transform"),y=t("filter"),S=t("animation"),x=['"',"'",'\\"',"\\'"];function O(t){return t&&typeof t===f}function b(t){return Array.isArray(t)}function M(t){return typeof t===n}function R(t,r,e,n){for(var i=e;i<n;++i){var a=r[i].trim();if(a===t)return i;var o=i;if("("===a?o=R(")",r,i+1,n):-1<x.indexOf(a)&&(o=R(a,r,i+1,n)),-1===o)break;i=o}return-1}function F(t,r){for(var e=new RegExp("(\\s*"+(r||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),n=t.split(e).filter(Boolean),i=n.length,a=[],o=[],s=0;s<i;++s){var u=n[s].trim(),f=s;if("("===u)f=R(")",n,s+1,i);else{if(")"===u)throw new Error("invalid format");if(-1<x.indexOf(u))f=R(u,n,s+1,i);else if(u===r){o.length&&(a.push(o.join("")),o=[]);continue}}-1===f&&(f=i-1),o.push(n.slice(s,f+1).join("")),s=f}return o.length&&a.push(o.join("")),a}function j(t){return F(t,",")}function w(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function E(t){if(Object.keys)return Object.keys(t);var r=[];for(var e in r)r.push(e);return r}function D(t,i){void 0===i&&(i=[]),t.sort(function(t,r){var e=i.indexOf(t),n=i.indexOf(r);return-1===n&&-1===e?0:-1===e?1:-1===n?-1:e-n})}function N(t){var r=t.replace("#",""),e=parseInt(r.substring(0,2),16),n=parseInt(r.substring(2,4),16),i=parseInt(r.substring(4,6),16),a=parseInt(r.substring(6,8),16)/255;return isNaN(a)&&(a=1),[e,n,i,a]}function z(t){if("#"===t.charAt(0))return 4===t.length||5===t.length?N((f=(u=t).charAt(1),c=u.charAt(2),h=u.charAt(3),l=u.charAt(4),["#",f,f,c,c,h,h,l,l].join(""))):N(t);if(-1!==t.indexOf("(")){var r=w(t),e=r.prefix,n=r.value;if(!e||!n)return;var i=j(n),a=[0,0,0,1],o=i.length;switch(e){case p:case v:for(var s=0;s<o;++s)a[s]=parseFloat(i[s]);return a;case d:case g:for(s=0;s<o;++s)-1!==i[s].indexOf("%")?a[s]=parseFloat(i[s])/100:a[s]=parseFloat(i[s]);return function(t){var r,e=t[0],n=t[1],i=t[2];e<0&&(e+=360*Math.floor((Math.abs(e)+360)/360)),e%=360;var a=(1-Math.abs(2*i-1))*n,o=a*(1-Math.abs(e/60%2-1)),s=i-a/2,u=e<60?[a,o,0]:e<120?[o,a,0]:e<180?[0,a,o]:e<240?[0,o,a]:e<300?[o,0,a]:e<360?[a,0,o]:[0,0,0];return[Math.round(255*(u[0]+s)),Math.round(255*(u[1]+s)),Math.round(255*(u[2]+s)),null!==(r=t[3])&&void 0!==r?r:1]}(a)}}var u,f,c,h,l}var r=function(){function o(t){this.separator=t,this.orderMap={}}var t=o.prototype;return t.getFullName=function(t){return t.join(this.separator)},t.get=function(t){return this.orderMap[this.getFullName(t)]},t.gets=function(t,r){void 0===r&&(r=!0);var o=[],e=this;return function n(i,a){var t=e.get(i);if(t)return t.forEach(function(t){var r=a.concat([t]),e=n(i.concat([t]),r);e&&e.length||o.push(a.concat([t]))}),t}(t,r?t:[]),o},t.set=function(e,t){var n=this;return e.forEach(function(t,r){n.addName(e.slice(0,r),t)}),this.orderMap[this.getFullName(e)]=t},t.add=function(t){var r=t.length;return r?this.addName(t.slice(0,-1),t[r-1]):[]},t.addName=function(t,r){var e=this.get(t)||this.set(t,[]);return-1===e.indexOf(r)&&e.push(r),e},t.findIndex=function(t,r){var e=this.orderMap[this.getFullName(t)];return e?e.indexOf(r):-1},t.remove=function(t){var r=this.getFullName(t),e=this.orderMap;for(var n in e)0===n.indexOf(r)&&delete e[n];var i,a,o=t.length;return o&&(i=t.slice(0,-1),a=t[o-1],this.splice(i,this.findIndex(i,a),1)),this},t.filter=function(t,r,e){void 0===e&&(e=!0);var n=this.gets(t,e).filter(r),i=new o(this.separator),a=e?[]:t;return n.forEach(function(t){i.add(a.concat(t))}),i},t.splice=function(t,r,e){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];var a=this.get(t)||this.set(t,[]);return a.splice.apply(a,[r,e].concat(n)),this},t.clear=function(){this.orderMap={}},t.setObject=function(t){var r=this.orderMap;for(var e in t)r[e]=t[e].slice()},t.getObject=function(){var t={},r=this.orderMap;for(var e in r)t[e]=r[e].slice();return t},t.clone=function(){var t=new o(this.separator);return t.setObject(t.orderMap),t},o}();function A(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),i=0,r=0;r<e;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function T(t,r,e){var n=1-e;return e*e*e+3*e*e*n*r+3*e*n*n*t}function _(e,n,i,a){function t(t){var r=function(t,r,e){for(var n=e,i=1;.001<Math.abs(i);){if(i=T(t,r,n)-e,Math.abs(i)<.001)return n;n-=i/2}return n}(e,i,Math.max(Math.min(1,t),0));return T(n,a,r)}return t.easingName="cubic-bezier("+e+","+n+","+i+","+a+")",t}function G(e,n){function t(t){var r=1/e;return 1<=t?1:("start"===n?r:0)+Math.floor(t/r)*r}return t.easingName="steps("+e+", "+n+")",t}var C,I=G(1,"start"),k=G(1,"end"),B=_(0,0,1,1),V=_(.25,.1,.25,1),K=_(.42,0,1,1),W=_(0,0,.58,1),$=_(.42,0,.58,1),q="animation-timing-function",H={transform:{},filter:{},attribute:{},html:!0},P={easing:[q]},X=((C={})[q]=!0,C.contents=!0,C.html=!0,C),Y="playSpeed",J="easingName",L="transform",Q={linear:B,ease:V,"ease-in":K,"ease-out":W,"ease-in-out":$,"step-start":I,"step-end":k},U=function(){function o(t,r){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",r&&this.setOptions(r),this.value=M(t)?t.split(this.separator):t}var t=o.prototype;return t.setOptions=function(t){for(var r in t)this[r]=t[r];return this},t.size=function(){return this.value.length},t.get=function(t){return this.value[t]},t.set=function(t,r){return this.value[t]=r,this},t.clone=function(){var t=this,r=t.separator,e=t.prefix,n=t.suffix,i=t.model,a=t.type;return new o(this.value.map(function(t){return t instanceof o?t.clone():t}),{separator:r,prefix:e,suffix:n,model:i,type:a})},t.toValue=function(){return this.prefix+this.join()+this.suffix},t.join=function(){return this.value.map(function(t){return t instanceof o?t.toValue():t}).join(this.separator)},t.forEach=function(t){return this.value.forEach(t),this},o}();function Z(t){var r=v;return 3===t.length&&(t[3]=1),new U(t,{model:r,separator:",",type:"color",prefix:r+"(",suffix:")"})}function tt(t,r){return new U(t,{type:"array",separator:r})}function rt(t,r){if(!M(t))return b(t)?tt(t,","):t;var e,n,i=j(t);return 1<i.length?tt(i.map(function(t){return rt(t)}),","):1<(i=F(t,"")).length?tt(i.map(function(t){return rt(t)})," "):(i=/^(['"])([^'"]*)(['"])$/g.exec(t))&&i[1]===i[3]?new U([rt(i[2])],{prefix:i[1],suffix:i[1]}):-1!==t.indexOf("(")?function(t){var r=w(t),e=r.prefix,n=r.value,i=r.suffix;if(void 0===n)return t;if(-1<c.indexOf(e))return Z(z(t));var a=rt(n,e),o=[n],s=",",u=e+"(",f=")"+i;return a instanceof U&&(s=a.separator,o=a.value,u+=a.prefix,f=a.suffix+f),new U(o,{separator:s,model:e,prefix:u,suffix:f})}(t):"#"===t.charAt(0)&&"url"!==r?(n=z(e=t))?Z(n):e:t}function et(t){return t instanceof U}function nt(t){var r=typeof t;if(r===f){if(b(t))return u;if(et(t))return s}else if(r===n||r===i)return"value";return r}function it(t,r){var e,n=[];if(O(e=t)&&e.constructor===Object)for(var i in t)r.push(i),n=n.concat(it(t[i],r)),r.pop();else n.push(r.slice());return n}function at(t,r,e){void 0===e&&(e=t.length);for(var n=r,i=0;i<e;++i){if(!O(n)||null==n)return;n=n[t[i]]}return n}function ot(t,r,e){var n=r.length,i=t;if(0===n)return!1;for(var a=0;a<n;++a){if(!0===i)return!1;if(!(i=i[r[a]])||!e&&!0===i)return!1}return!0}function st(t,r){return ot(H,t,r)}function ut(t){return ot(X,t,!0)}A(["id","iterationCount","delay","fillMode","direction",Y,"duration",Y,"iterationTime","playState"],["easing",J]);function ft(r,t){if(void 0===t&&(t=[]),!r)return"";var e=[],n=E(r);return D(n,t),n.forEach(function(t){e.push(t.replace(/\d$/g,"")+"("+r[t]+")")}),e.join(" ")}function ct(t,r){return void 0===r&&(r=!1),ht({},t,r)}function ht(t,r,e){for(var n in void 0===e&&(e=!1),r){var i=r[n],a=nt(i);a===s?t[n]=e?i.toValue():i.clone():a===o?t[n]=e?pt([n],i):i:a===u?t[n]=i.slice():a===f?O(t[n])&&!et(t[n])?ht(t[n],i,e):t[n]=ct(i,e):t[n]=r[n]}return t}function lt(t){return t[0]in P?P[t[0]]:t}function pt(t,r){var e=nt(r);if(e===s)return r.toValue();if(e===o){if(t[0]!==q)return pt(t,r())}else if(e===f)return ct(r,!0);return r}var vt=function(){function l(t){void 0===t&&(t={}),this.properties={},this.orderMap=new r("_///_"),this.properties={},this.set(t)}var t=l.prototype;return t.get=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=this.raw.apply(this,t);return pt(lt(t),e)},t.getOrders=function(t){return this.orderMap.get(t)},t.setOrders=function(t,r){return this.orderMap.set(t,r)},t.getOrderObject=function(){return this.orderMap.getObject()},t.setOrderObject=function(t){this.orderMap.setObject(t)},t.getKeys=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=this.raw.apply(this,t),n=nt(e)===f?E(e):[];return D(n,this.orderMap.get(t)),n},t.gets=function(){for(var r=this,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.get.apply(this,e);return this.getKeys.apply(this,e).map(function(t){return{key:t,value:n[t],children:r.gets.apply(r,A(e,[t]))}})},t.raw=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return at(lt(t),this.properties)},t.remove=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=lt(t),n=e.length;if(!n)return this;this.orderMap.remove(e);var i=at(e,this.properties,n-1);return O(i)&&delete i[e[n-1]],this},t.set=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e,n=this,i=t.length,a=t.slice(0,-1),o=t[i-1],s=a[0];if(1===i&&o instanceof l)n.merge(o);else if(s in P)n._set(P[s],o);else if(2===i&&b(s))n._set(s,o);else if(et(o))st(a)?n.set.apply(n,A(a,[function r(t,e){void 0===e&&(e={});var n,i=t.model;return i?(t.setOptions({model:"",suffix:"",prefix:""}),n=1<t.size()?t:t.get(0),e[i]=n):t.forEach(function(t){r(t,e)}),e}(o)])):n._set(a,o);else if(b(o))n._set(a,o);else if(O(o))for(var u in!n.has.apply(n,a)&&st(a)&&n._set(a,{}),o)n.set.apply(n,A(a,[u,o[u]]));else if(M(o)){if(st(a,!0))return ut(a)||!st(a)?this._set(a,o):O(e=rt(o))&&n.set.apply(n,A(a,[e])),this;var f=function(t){for(var r=F(t,";"),e={},n=r.length,i=n,a=0;a<n;++a){var o=F(r[a],":");o.length<2||!o[1]?--i:e[o[0].trim()]=rt(o[1].trim())}return{styles:e,length:i}}(o),c=f.styles,h=f.length;for(var u in c)n.set.apply(n,A(a,[u,c[u]]));if(h)return this;n._set(a,o)}else n._set(a,o);return n},t.getNames=function(){return it(this.properties,[])},t.has=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=lt(t),n=e.length;return!!n&&!(typeof at(e,this.properties,n)==a)},t.clone=function(){var t=new l;return t.setOrderObject(this.orderMap.orderMap),t.merge(this)},t.merge=function(t){var r=this.properties,e=t.properties;return e&&ht(r,e),this},t.toCSSObject=function(){var t,r=this.get(),e={};for(var n in r){st([n],!0)||(t=r[n],n===q?e[q.replace("animation",S)]=(M(t)?t:t[J])||"initial":e[n]=t)}var i=ft(r[L],this.orderMap.get([L])),a=ft(r.filter,this.orderMap.get([y]));return m&&i&&(e[m]=i),y&&a&&(e[y]=a),e},t.toCSS=function(){var r=this.toCSSObject(),e=[],t=E(r);return D(t,this.orderMap.get([])),t.forEach(function(t){e.push(t+":"+r[t]+";")}),e.join("")},t.clear=function(){return this.properties={},this.orderMap.clear(),this},t._set=function(t,r){for(var e,n=this.properties,i=t.length,a=0;a<i-1;++a){var o=t[a];o in n||(n[o]={}),n=n[o]}i&&(e=t[i-1],this.orderMap.add(t),n[e]=1===i&&e===q?function(t){var r;if(M(t))if(t in Q)r=Q[t];else{var e=rt(t);if(M(e))return 0;if("cubic-bezier"===e.model)r=_((t=e.value.map(function(t){return parseFloat(t)}))[0],t[1],t[2],t[3]);else{if("steps"!==e.model)return 0;r=G(parseFloat(e.value[0]),e.value[1])}}else r=b(t)?_(t[0],t[1],t[2],t[3]):t;return r}(r):M(r)&&!ut(t)?rt(r,e):r)},l}();return function(){function r(t){var n=this;void 0===t&&(t={}),this.map=new Map,this.onBeforeRenderStart=function(t){var r=n.testFrame(t);t.setTransform(r.toCSSObject().transform||"")},this.onBeforeRenderGroupStart=function(t){t.events.forEach(function(t){n.onBeforeRenderStart(t)})},this.onDragStart=function(t){var r=n.testFrame(t);if(!r)return!1;n.setTranasform(t,r,"translate")},this.onDrag=function(t){n.testDrag(t),n.testRender(t.target)},this.onDragGroupStart=function(t){t.events.forEach(function(t){n.onDragStart(t)})},this.onDragGroup=function(t){t.events.forEach(function(t){n.onDrag(t)})},this.onResizeStart=function(t){t.dragStart&&n.onDragStart(t.dragStart),t.setOrigin(["%","%"])},this.onResize=function(t){n.testResize(t),n.testRender(t.target)},this.onResizeGroupStart=function(t){t.events.forEach(function(t){n.onResizeStart(t)})},this.onResizeGroup=function(t){t.events.forEach(function(t){n.onResize(t)})},this.onScaleStart=function(t){var r=n.testFrame(t);if(!r)return!1;n.setTranasform(t,r,"scale"),t.dragStart&&n.onDragStart(t.dragStart)},this.onScale=function(t){n.testScale(t),n.testRender(t.target)},this.onScaleGroupStart=function(t){t.events.forEach(function(t){n.onScaleStart(t)})},this.onScaleGroup=function(t){t.events.forEach(function(t){n.onScale(t)})},this.onRotateStart=function(t){var r=n.testFrame(t);if(!r)return!1;n.setTranasform(t,r,"rotate"),t.dragStart&&n.onDragStart(t.dragStart)},this.onRotate=function(t){n.testRotate(t),n.testRender(t.target)},this.onRotateGroupStart=function(t){t.events.forEach(function(t){n.onRotateStart(t)})},this.onRotateGroup=function(t){t.events.forEach(function(t){n.onRotate(t)})},this.onClip=function(t){var r=n.testFrame(t);"rect"===t.clipType?r.set("clip",t.clipStyle):r.set("clip-path",t.clipStyle),n.testRender(t.target)},this.onDragOriginStart=function(t){t.dragStart&&n.onDragStart(t.dragStart)},this.onDragOrigin=function(t){n.testFrame(t).set("transform-origin",t.transformOrigin),n.testDrag(t.drag),n.testRender(t.target)},this.onRound=function(t){n.testFrame(t).set("border-radius",t.borderRadius),n.testRender(t.target)},this.onWarpStart=function(t){var r=n.testFrame(t);if(!r)return!1;n.setTranasform(t,r,"matrix3d")},this.onWarp=function(t){n.testFrame(t).set("transform","matrix3d",t.matrix.join(", ")),n.testRender(t.target)},this.onRender=function(t){var r=t.target,e=n.getFrame(r);r&&e&&n.render(r,e)},this.options=e({useBeforeRender:!1,useRender:!1,createAuto:!0},t)}var t=r.prototype;return r.create=function(t){return new r(t)},t.render=function(t,r){void 0===r&&(r=this.getFrame(t)),t.style.cssText+=r.toCSS()},t.clear=function(){this.map.clear()},t.getTargets=function(){return this.map.keys()},t.getFrames=function(){return this.map.values()},t.getFrame=function(t){return this.map.get(t)},t.setFrame=function(t,r){return this.map.set(t,r)},t.removeFrame=function(t){this.map.delete(t)},t.createFrame=function(t,r){void 0===r&&(r={});var e=new vt({transform:{translate:"0px, 0px",rotate:"0deg",scale:"1, 1"}});return e.set(r),this.map.set(t,e),e},t.setElements=function(t){for(var r=M(t)?document.querySelectorAll(t):t,e=r.length,n=this.map,i=0;i<e;++i){var a=r[i];n.has(a)||this.createFrame(a)}},t.testFrame=function(t){var r=t.target,e=this.getFrame(r);return e||(this.options.createAuto||!t.stop?this.createFrame(r):void t.stop())},t.testDrag=function(t){var r=t.target,e=t.translate,n=this.getFrame(r),i=e[0]+"px",a=e[1]+"px";n.has("transform","translate")?n.set("transform","translate",i+","+a):(n.set("transform","translateX",i),n.set("transform","translateY",a))},t.testResize=function(t){var r=t.target,e=this.getFrame(r);e.set("width",t.width+"px"),e.set("height",t.height+"px"),this.testDrag(t.drag)},t.testScale=function(t){var r=this.testFrame(t),e=t.scale;this.testDrag(t.drag),r.set("transform","scale",e[0]+","+e[1])},t.testRotate=function(t){var r=this.testFrame(t),e=t.rotate;this.testDrag(t.drag),r.set("transform","rotate",e+"deg")},t.testRender=function(t,r){void 0===r&&(r=this.getFrame(t)),this.options.useRender||this.render(t,r)},t.setTranasform=function(t,r,e){var n,i=(n=e,(r.getOrders(["transform"])||[]).indexOf(n));this.options.useBeforeRender?t.setTransformIndex(i):t.setTransform(r.toCSSObject().transform||[],i)},r}()});
//# sourceMappingURL=moveable-helper.min.js.map
