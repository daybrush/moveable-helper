{"version":3,"file":"moveable-helper.js","sources":["../src/utils.ts","../src/MoveableHelper.ts"],"sourcesContent":["import { Frame } from \"scenejs\";\n\nexport function getOrderIndex(frame: Frame, functionName: string) {\n    const orders = frame.getOrders([\"transform\"]) || [];\n    return orders.indexOf(functionName);\n}\n","import { Frame } from \"scenejs\";\nimport {\n    OnDragStart, OnDrag, OnRender, OnResize, OnResizeStart,\n    OnScaleStart, OnScale, OnRotate, OnRotateStart,\n    OnDragGroupStart, OnDragGroup, OnResizeGroupStart,\n    OnResizeGroup, OnScaleGroupStart, OnScaleGroup,\n    OnRotateGroupStart, OnRotateGroup, OnWarp, OnWarpStart,\n    OnClip, OnDragOriginStart, OnDragOrigin, OnRound, OnBeforeRenderStart,\n    OnTransformStartEvent, OnBeforeRenderGroupStart\n} from \"react-moveable/declaration/types\";\nimport { MoveableHelperOptions } from \"./types\";\nimport { isString } from \"@daybrush/utils\";\nimport { getOrderIndex } from \"./utils\";\n\n\nexport default class MoveableHelper {\n    public static create(options: Partial<MoveableHelperOptions> ) {\n        return new MoveableHelper(options);\n    }\n    public options: Partial<MoveableHelperOptions>;\n    constructor(options: Partial<MoveableHelperOptions> = {}) {\n        this.options = {\n            useBeforeRender: false,\n            useRender: false,\n            createAuto: true,\n            ...options,\n        };\n    }\n    public map = new Map<HTMLElement | SVGElement, Frame>();\n    public render(target: HTMLElement | SVGElement, frame: Frame = this.getFrame(target)) {\n        target.style.cssText += frame.toCSS();\n    }\n    public clear() {\n        this.map.clear();\n    }\n    public getTargets() {\n        return this.map.keys();\n    }\n    public getFrames() {\n        return this.map.values();\n    }\n    public getFrame(el: HTMLElement | SVGElement) {\n        return this.map.get(el);\n    }\n    public setFrame(el: HTMLElement | SVGElement, frame: Frame) {\n        return this.map.set(el, frame);\n    }\n    public removeFrame(el: HTMLElement | SVGElement) {\n        this.map.delete(el);\n    }\n\n    public createFrame(el: HTMLElement | SVGElement, properites = {}) {\n        const frame = new Frame({\n            transform: {\n                translate: \"0px, 0px\",\n                rotate: \"0deg\",\n                scale: \"1, 1\",\n            },\n        })\n\n        frame.set(properites);\n\n        this.map.set(el, frame);\n        return frame;\n    }\n    public setElements(selector: { [key: number]: HTMLElement | SVGElement, length: number } | string) {\n        const elements = isString(selector) ? document.querySelectorAll<HTMLElement | SVGElement>(selector) : selector;\n        const length = elements.length;\n        const map = this.map;\n\n        for (let i = 0; i < length; ++i) {\n            const el = elements[i];\n            if (map.has(el)) {\n                continue;\n            }\n            this.createFrame(el);\n        }\n    }\n    public onBeforeRenderStart = (e: OnBeforeRenderStart) => {\n        const frame = this.testFrame(e);\n\n        e.setTransform(frame.toCSSObject().transform || \"\");\n    }\n    public onBeforeRenderGroupStart = (e: OnBeforeRenderGroupStart) => {\n        e.events.forEach(ev => {\n            this.onBeforeRenderStart(ev);\n        });\n    }\n    public onDragStart = (e: OnDragStart) => {\n        const frame = this.testFrame(e);\n\n        if (!frame) {\n            return false;\n        }\n        this.setTranasform(e, frame, \"translate\");\n    }\n    public onDrag = (e: OnDrag) => {\n        this.testDrag(e);\n        this.testRender(e.target);\n    }\n    public onDragGroupStart = (e: OnDragGroupStart) => {\n        e.events.forEach(ev => {\n            this.onDragStart(ev);\n        });\n    }\n    public onDragGroup = (e: OnDragGroup) => {\n        e.events.forEach(ev => {\n            this.onDrag(ev);\n        });\n    }\n    public onResizeStart = (e: OnResizeStart) => {\n        e.dragStart && this.onDragStart(e.dragStart);\n        e.setOrigin([\"%\", \"%\"]);\n    }\n    public onResize = (e: OnResize) => {\n        this.testResize(e);\n        this.testRender(e.target);\n    }\n    public onResizeGroupStart = (e: OnResizeGroupStart) => {\n        e.events.forEach(ev => {\n            this.onResizeStart(ev);\n        });\n    }\n    public onResizeGroup = (e: OnResizeGroup) => {\n        e.events.forEach(ev => {\n            this.onResize(ev);\n        });\n    }\n    public onScaleStart = (e: OnScaleStart) => {\n        const frame = this.testFrame(e);\n\n        if (!frame) {\n            return false;\n        }\n\n        this.setTranasform(e, frame, \"scale\");\n        e.dragStart && this.onDragStart(e.dragStart);\n    }\n    public onScale = (e: OnScale) => {\n        this.testScale(e);\n        this.testRender(e.target);\n    }\n    public onScaleGroupStart = (e: OnScaleGroupStart) => {\n        e.events.forEach(ev => {\n            this.onScaleStart(ev);\n        });\n    }\n    public onScaleGroup = (e: OnScaleGroup) => {\n        e.events.forEach(ev => {\n            this.onScale(ev);\n        });\n    }\n    public onRotateStart = (e: OnRotateStart) => {\n        const frame = this.testFrame(e);\n\n        if (!frame) {\n            return false;\n        }\n\n        this.setTranasform(e, frame, \"rotate\");\n        e.dragStart && this.onDragStart(e.dragStart);\n    }\n    public onRotate = (e: OnRotate) => {\n        this.testRotate(e);\n        this.testRender(e.target);\n    }\n    public onRotateGroupStart = (e: OnRotateGroupStart) => {\n        e.events.forEach(ev => {\n            this.onRotateStart(ev);\n        });\n    }\n    public onRotateGroup = (e: OnRotateGroup) => {\n        e.events.forEach(ev => {\n            this.onRotate(ev);\n        });\n    }\n    public onClip = (e: OnClip) => {\n        const frame = this.testFrame(e);\n        if (e.clipType === \"rect\") {\n            frame.set(\"clip\", e.clipStyle);\n        } else {\n            frame.set(\"clip-path\", e.clipStyle);\n        }\n        this.testRender(e.target);\n    }\n    public onDragOriginStart = (e: OnDragOriginStart) => {\n        e.dragStart && this.onDragStart(e.dragStart);\n    }\n    public onDragOrigin = (e: OnDragOrigin) => {\n        const frame = this.testFrame(e);\n\n        frame.set(\"transform-origin\", e.transformOrigin);\n        this.testDrag(e.drag);\n        this.testRender(e.target);\n    }\n    public onRound = (e: OnRound) => {\n        const frame = this.testFrame(e);\n\n        frame.set(\"border-radius\", e.borderRadius);\n        this.testRender(e.target);\n    }\n    public onWarpStart = (e: OnWarpStart) => {\n        const frame = this.testFrame(e);\n\n        if (!frame) {\n            return false;\n        }\n        this.setTranasform(e, frame, \"matrix3d\");\n    }\n    public onWarp = (e: OnWarp) => {\n        const frame = this.testFrame(e);\n\n        frame.set(\"transform\", \"matrix3d\", e.matrix.join(\", \"));\n        this.testRender(e.target);\n    }\n    public onRender = (e: OnRender) => {\n        const target = e.target;\n        const frame = this.getFrame(target);\n\n        if (!target || !frame) {\n            return;\n        }\n        this.render(target, frame);\n    }\n    private testFrame(e: any) {\n        const target = e.target;\n        const frame = this.getFrame(target);\n\n\n        if (frame) {\n            return frame;\n        }\n        if (!this.options.createAuto) {\n            if (e.stop) {\n                e.stop();\n                return;\n            }\n        }\n        return this.createFrame(target);\n    }\n    private testDrag(e: OnDrag) {\n        const target = e.target;\n        const translate = e.translate;\n\n        const frame = this.getFrame(target);\n        const tx = `${translate[0]}px`;\n        const ty = `${translate[1]}px`;\n\n        if (frame.has(\"transform\", \"translate\")) {\n            frame.set(\"transform\", \"translate\", `${tx},${ty}`);\n        } else {\n            frame.set(\"transform\", \"translateX\", tx);\n            frame.set(\"transform\", \"translateY\", ty);\n        }\n    }\n    private testResize(e: OnResize) {\n        const target = e.target;\n        const frame = this.getFrame(target);\n\n        frame.set(\"width\", `${e.width}px`);\n        frame.set(\"height\", `${e.height}px`);\n\n        this.testDrag(e.drag);\n    }\n    private testScale(e: OnScale) {\n        const frame = this.testFrame(e);\n        const scale = e.scale;\n\n        this.testDrag(e.drag);\n        frame.set(\"transform\", \"scale\", `${scale[0]},${scale[1]}`);\n    }\n    private testRotate(e: OnRotate) {\n        const frame = this.testFrame(e);\n        const rotate = e.rotate;\n\n        this.testDrag(e.drag);\n        frame.set(\"transform\", \"rotate\", `${rotate}deg`);\n    }\n    private testRender(target, frame = this.getFrame(target)) {\n        if (!this.options.useRender) {\n            this.render(target, frame);\n        }\n    }\n    private setTranasform(e: OnTransformStartEvent, frame: Frame, functionName: string) {\n        const orderIndex = getOrderIndex(frame, functionName);\n        if (this.options.useBeforeRender) {\n            e.setTransformIndex(orderIndex);\n        } else {\n            e.setTransform(frame.toCSSObject().transform || [], orderIndex);\n        }\n    }\n}\n"],"names":["getOrderIndex","frame","functionName","orders","getOrders","indexOf","options","Map","e","_this","testFrame","setTransform","toCSSObject","transform","events","forEach","ev","onBeforeRenderStart","setTranasform","testDrag","testRender","target","onDragStart","onDrag","dragStart","setOrigin","testResize","onResizeStart","onResize","testScale","onScaleStart","onScale","testRotate","onRotateStart","onRotate","clipType","set","clipStyle","transformOrigin","drag","borderRadius","matrix","join","getFrame","render","useBeforeRender","useRender","createAuto","MoveableHelper","style","cssText","toCSS","map","clear","keys","values","el","get","delete","properites","Frame","translate","rotate","scale","selector","elements","isString","document","querySelectorAll","length","i","has","createFrame","stop","tx","ty","width","height","orderIndex","setTransformIndex"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}