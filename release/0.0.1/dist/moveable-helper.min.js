/*
Copyright (c) 2020 Daybrush
name: moveable-helper
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable-helper.git
version: 0.0.1
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).MoveableHelper=e()}(this,function(){"use strict";function t(t){if(!h)return"";var e=(h.body||h.documentElement).style,r=l.length;if(typeof e[t]!=a)return t;for(var n=0;n<r;++n){var i="-"+l[n]+"-"+t;if(typeof e[i]!=a)return i}return""}var r=function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},p="rgb",v="rgba",g="hsl",m="hsla",c=[p,v,g,m],o="function",s="property",u="array",f="object",n="string",i="number",a="undefined",h=typeof document!=a&&document,l=["webkit","ms","moz","o"],d=t("transform"),x=t("filter"),S=t("animation"),y=['"',"'",'\\"',"\\'"];function b(t){return t&&typeof t===f}function R(t){return Array.isArray(t)}function F(t){return typeof t===n}function w(t,e,r,n){for(var i=r;i<n;++i){var a=e[i].trim();if(a===t)return i;var o=i;if("("===a?o=w(")",e,i+1,n):-1<y.indexOf(a)&&(o=w(a,e,i+1,n)),-1===o)break;i=o}return-1}function j(t,e){for(var r=t.split(/(\s*,\s*|\(|\)|"|'|\\"|\\'|\s+)/g).filter(Boolean),n=r.length,i=[],a=[],o=0;o<n;++o){var s=r[o].trim(),u=o;if("("===s)u=w(")",r,o+1,n);else{if(")"===s)throw new Error("invalid format");if(-1<y.indexOf(s))u=w(s,r,o+1,n);else if(s===e){a.length&&(i.push(a.join("")),a=[]);continue}}-1===u&&(u=n-1),a.push(r.slice(o,u+1).join("")),o=u}return a.length&&i.push(a.join("")),i}function O(t){return j(t,",")}function D(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function M(t){var e=t.replace("#",""),r=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[r,n,i,a]}function z(t){if("#"===t.charAt(0))return 4===t.length||5===t.length?M((f=(u=t).charAt(1),c=u.charAt(2),h=u.charAt(3),l=u.charAt(4),["#",f,f,c,c,h,h,l,l].join(""))):M(t);if(-1!==t.indexOf("(")){var e=D(t),r=e.prefix,n=e.value;if(!r||!n)return;var i=O(n),a=[],o=i.length;switch(r){case p:case v:for(var s=0;s<o;++s)a[s]=parseFloat(i[s]);return a;case g:case m:for(s=0;s<o;++s)-1!==i[s].indexOf("%")?a[s]=parseFloat(i[s])/100:a[s]=parseFloat(i[s]);return function(t){var e=t[0],r=t[1],n=t[2];e<0&&(e+=360*Math.floor((Math.abs(e)+360)/360)),e%=360;var i,a=(1-Math.abs(2*n-1))*r,o=a*(1-Math.abs(e/60%2-1)),s=n-a/2;return e<60?i=[a,o,0]:e<120?i=[o,a,0]:e<180?i=[0,a,o]:e<240?i=[0,o,a]:e<300?i=[o,0,a]:e<360&&(i=[a,0,o]),[Math.round(255*(i[0]+s)),Math.round(255*(i[1]+s)),Math.round(255*(i[2]+s)),3<t.length?t[3]:1]}(a)}}var u,f,c,h,l}function E(t,e,r){var n=1-r;return r*r*r+3*r*r*n*e+3*r*n*n*t}function A(r,n,i,a){function t(t){var e=function(t,e,r){for(var n=r,i=1;.001<Math.abs(i);){if(i=E(t,e,n)-r,Math.abs(i)<.001)return n;n-=i/2}return n}(r,i,Math.max(Math.min(1,t),0));return E(n,a,e)}return t.easingName="cubic-bezier("+r+","+n+","+i+","+a+")",t}function _(r,n){function t(t){var e=1/r;return 1<=t?1:("start"===n?e:0)+Math.floor(t/e)*e}return t.easingName="steps("+r+", "+n+")",t}var e,G=_(1,"start"),N=_(1,"end"),T=A(0,0,1,1),C=A(.25,.1,.25,1),I=A(.42,0,1,1),V=A(0,0,.58,1),k=A(.42,0,.58,1),H="animation-timing-function",X={transform:{},filter:{},attribute:{},html:!0},Y={easing:[H]},$=((e={})[H]=!0,e.contents=!0,e.html=!0,e),B={linear:T,ease:C,"ease-in":I,"ease-out":V,"ease-in-out":k,"step-start":G,"step-end":N},P=function(){function o(t,e){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",e&&this.setOptions(e),this.value=F(t)?t.split(this.separator):t}var t=o.prototype;return t.setOptions=function(t){for(var e in t)this[e]=t[e];return this},t.size=function(){return this.value.length},t.get=function(t){return this.value[t]},t.set=function(t,e){return this.value[t]=e,this},t.clone=function(){var t=this,e=t.separator,r=t.prefix,n=t.suffix,i=t.model,a=t.type;return new o(this.value.map(function(t){return t instanceof o?t.clone():t}),{separator:e,prefix:r,suffix:n,model:i,type:a})},t.toValue=function(){return this.prefix+this.join()+this.suffix},t.join=function(){return this.value.map(function(t){return t instanceof o?t.toValue():t}).join(this.separator)},t.forEach=function(t){return this.value.forEach(t),this},o}();function W(t){var e=v;return 3===t.length&&(t[3]=1),new P(t,{model:e,separator:",",type:"color",prefix:e+"(",suffix:")"})}function q(t,e){return new P(t,{type:"array",separator:e})}function J(t,e){if(!F(t))return R(t)?q(t,","):t;var r,n,i=O(t);return 1<i.length?q(i.map(function(t){return J(t)}),","):1<(i=j(t,"")).length?q(i.map(function(t){return J(t)})," "):(i=/^(['"])([^'"]*)(['"])$/g.exec(t))&&i[1]===i[3]?new P([J(i[2])],{prefix:i[1],suffix:i[1]}):-1!==t.indexOf("(")?function(t){var e=D(t),r=e.prefix,n=e.value,i=e.suffix;if(void 0===n)return t;if(-1<c.indexOf(r))return W(z(t));var a=J(n,r),o=[n],s=",",u=r+"(",f=")"+i;return a instanceof P&&(s=a.separator,o=a.value,u+=a.prefix,f=a.suffix+f),new P(o,{separator:s,model:r,prefix:u,suffix:f})}(t):"#"===t.charAt(0)&&"url"!==e?(n=z(r=t))?W(n):r:t}function K(t){return t instanceof P}function L(t){var e=typeof t;if(e===f){if(R(t))return u;if(K(t))return s}else if(e===n||e===i)return"value";return e}function Q(t,e){var r,n=[];if(b(r=t)&&r.constructor===Object)for(var i in t)e.push(i),n=n.concat(Q(t[i],e)),e.pop();else n.push(e.slice());return n}function U(t,e,r){void 0===r&&(r=t.length);for(var n=e,i=0;i<r;++i){if(!b(n))return;n=n[t[i]]}return n}function Z(t,e,r){var n=e.length,i=t;if(0===n)return!1;for(var a=0;a<n;++a){if(!0===i)return!1;if(!(i=i[e[a]])||!r&&!0===i)return!1}return!0}function tt(t,e){return Z(X,t,e)}function et(t){return Z($,t,!0)}function rt(t){if(!t)return"";var e=[];for(var r in t)e.push(r.replace(/\d$/g,"")+"("+t[r]+")");return e.join(" ")}function nt(t,e){return void 0===e&&(e=!1),it({},t,e)}function it(t,e,r){for(var n in void 0===r&&(r=!1),e){var i=e[n],a=L(i);a===s?t[n]=r?i.toValue():i.clone():a===o?t[n]=r?ot([n],i):i:a===u?t[n]=i.slice():a===f?b(t[n])&&!K(t[n])?it(t[n],i,r):t[n]=nt(i,r):t[n]=e[n]}return t}function at(t){return t[0]in Y?Y[t[0]]:t}function ot(t,e){var r=L(e);if(r===s)return e.toValue();if(r===o){if(t[0]!==H)return ot(t,e())}else if(r===f)return nt(e,!0);return e}var st=function(){function l(t){void 0===t&&(t={}),this.properties={},this.set(t)}var t=l.prototype;return t.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.raw.apply(this,t);return ot(at(t),r)},t.raw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return U(at(t),this.properties)},t.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=at(t),n=r.length;if(!n)return this;var i=U(r,this.properties,n-1);return b(i)&&delete i[r[n-1]],this},t.set=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r,n=this,i=t.length,a=t.slice(0,-1),o=t[i-1],s=a[0];if(1===i&&o instanceof l)n.merge(o);else if(s in Y)n._set(Y[s],o);else if(2===i&&R(s))n._set(s,o);else if(K(o))tt(a)?n.set.apply(n,a.concat([function e(t,r){void 0===r&&(r={});var n,i=t.model;return i?(t.setOptions({model:"",suffix:"",prefix:""}),n=1<t.size()?t:t.get(0),r[i]=n):t.forEach(function(t){e(t,r)}),r}(o)])):n._set(a,o);else if(R(o))n._set(a,o);else if(b(o))for(var u in!n.has.apply(n,a)&&tt(a)&&n._set(a,{}),o)n.set.apply(n,a.concat([u,o[u]]));else if(F(o)){if(tt(a,!0))return et(a)||!tt(a)?this._set(a,o):b(r=J(o))&&n.set.apply(n,a.concat([r])),this;var f=function(t){for(var e=t.split(";"),r={},n=e.length,i=0;i<n;++i){var a=/([^:]*):([\S\s]*)/g.exec(e[i]);!a||a.length<3||!a[1]?--n:r[a[1].trim()]=J(a[2].trim())}return{styles:r,length:n}}(o),c=f.styles,h=f.length;for(var u in c)n.set.apply(n,a.concat([u,c[u]]));if(h)return this;n._set(a,o)}else n._set(a,o);return n},t.getNames=function(){return Q(this.properties,[])},t.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=at(t),n=r.length;return!!n&&!(typeof U(r,this.properties,n)==a)},t.clone=function(){return(new l).merge(this)},t.merge=function(t){var e=this.properties,r=t.properties;return r&&it(e,r),this},t.toCSSObject=function(){var t,e=this.get(),r={};for(var n in e){tt([n],!0)||(t=e[n],n===H?r[H.replace("animation",S)]=(F(t)?t:t.easingName)||"initial":r[n]=t)}var i=rt(e.transform),a=rt(e.filter);return d&&i&&(r[d]=i),x&&a&&(r[x]=a),r},t.toCSS=function(){var t=this.toCSSObject(),e=[];for(var r in t)e.push(r+":"+t[r]+";");return e.join("")},t._set=function(t,e){for(var r,n=this.properties,i=t.length,a=0;a<i-1;++a){var o=t[a];o in n||(n[o]={}),n=n[o]}i&&(1===i&&t[0]===H?n[H]=function(t){var e;if(F(t))if(t in B)e=B[t];else{var r=J(t);if(F(r))return 0;if("cubic-bezier"===r.model)e=A((t=r.value.map(function(t){return parseFloat(t)}))[0],t[1],t[2],t[3]);else{if("steps"!==r.model)return 0;e=_(parseFloat(r.value[0]),r.value[1])}}else e=R(t)?A(t[0],t[1],t[2],t[3]):t;return e}(e):n[r=t[i-1]]=F(e)&&!et(t)?J(e,r):e)},l}();return function(){function e(t){var n=this;void 0===t&&(t={}),this.map=new Map,this.onDragStart=function(t){var e=n.testFrame(t);if(!e)return!1;t.set(n.getTranslate(e))},this.onDrag=function(t){n.testDrag(t),n.testRender(t.target)},this.onDragGroupStart=function(t){t.events.forEach(function(t){n.onDragStart(t)})},this.onDragGroup=function(t){t.events.forEach(function(t){n.onDrag(t)})},this.onResizeStart=function(t){t.dragStart&&n.onDragStart(t.dragStart),t.setOrigin(["%","%"])},this.onResize=function(t){n.testResize(t),n.testRender(t.target)},this.onResizeGroupStart=function(t){t.events.forEach(function(t){n.onResizeStart(t)})},this.onResizeGroup=function(t){console.log(t.offsetWidth/t.offsetHeight),t.events.forEach(function(t){n.onResize(t)})},this.onScaleStart=function(t){var e=n.testFrame(t);if(!e)return!1;var r=e.get("transform","scale").split(",").map(function(t){return parseFloat(t)});t.set(r),t.dragStart&&n.onDragStart(t.dragStart)},this.onScale=function(t){n.testScale(t),n.testRender(t.target)},this.onScaleGroupStart=function(t){t.events.forEach(function(t){n.onScaleStart(t)})},this.onScaleGroup=function(t){t.events.forEach(function(t){n.onScale(t)})},this.onRotateStart=function(t){var e=n.testFrame(t);if(!e)return!1;var r=parseFloat(e.get("transform","rotate"))||0;t.set(r),t.dragStart&&n.onDragStart(t.dragStart)},this.onRotate=function(t){n.testRotate(t),n.testRender(t.target)},this.onRotateGroupStart=function(t){t.events.forEach(function(t){n.onRotateStart(t)})},this.onRotateGroup=function(t){t.events.forEach(function(t){n.onRotate(t)})},this.onRender=function(t){var e=t.target,r=n.getFrame(e);e&&r&&n.render(e,r)},this.options=r({useRender:!1,createAuto:!0},t)}var t=e.prototype;return e.create=function(t){return new e(t)},t.getFrame=function(t){return this.map.get(t)},t.createFrame=function(t,e){void 0===e&&(e={});var r=new st({transform:{translate:"0px, 0px",rotate:"0deg",scale:"1, 1"}});return r.set(e),this.map.set(t,r),r},t.testFrame=function(t){var e=t.target,r=this.getFrame(e);return r||(this.options.createAuto||!t.stop?this.createFrame(e):void t.stop())},t.getTranslate=function(t){return this.testTranslate(t).map(function(t){return parseFloat(t)||0})},t.testTranslate=function(t){var e=t.get("transform","translate");if(e)return e.split(",");var r=t.get("transform","translateX");return r?[r,t.get("transform","translateY")]:(t.set("transform","translate","0px,0px"),["0px","0px"])},t.testDrag=function(t){var e=t.target,r=t.beforeTranslate,n=this.getFrame(e),i=r[0]+"px",a=r[1]+"px";n.has("transform","translate")?n.set("transform","translate",i+","+a):(n.set("transform","translateX",i),n.set("transform","translateY",a))},t.testResize=function(t){var e=t.target,r=this.getFrame(e);r.set("width",t.width+"px"),r.set("height",t.height+"px"),this.testDrag(t.drag)},t.testScale=function(t){var e=this.testFrame(t),r=t.scale;this.testDrag(t.drag),e.set("transform","scale",r[0]+","+r[1])},t.testRotate=function(t){var e=this.testFrame(t),r=t.beforeRotate;t.drag&&this.testDrag(t.drag),e.set("transform","rotate",r+"deg")},t.testRender=function(t,e){void 0===e&&(e=this.getFrame(t)),this.options.useRender||this.render(t,e)},t.render=function(t,e){void 0===e&&(e=this.getFrame(t)),t.style.cssText+=e.toCSS()},e}()});
//# sourceMappingURL=moveable-helper.min.js.map
